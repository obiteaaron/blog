原文：http://blog.sina.com.cn/s/blog_709da4b30102ww9q.html

问：我下了一个游戏的光盘镜像除了竞相文件还有（`_____padding_file_0_如果您看到此文件，请升级到BitComet(比特彗星)0.85或以上版本____`）这个这么长名字的文件12个，请问这是干吗用的？

 
答：
`_____padding_file_0_如果您看到此文件，请升级到BitComet(比特彗星)0.85或以上版本____`. 
这样子的文字么？ 
是的话 
不要管它 
这是因为做种的人用的是 比特彗星的高版本（0.85以上）进行种子文件的制作 
这是它的文件分块边界对齐文件 

下面是这东西的具体描述 
较长 
没耐心可以忽略 
关于这些东西 
就一句话 
下载的时候不要管它们，不勾选就是了 

这个是BitComet0.85版本以后加入的一个重要功能，即对大文件进行边界对齐，以优化文件下载和存储，防止一些错误。 


“`_____padding_file_0_如果您看到此文件，请升级到BitComet(比特彗星)0.85或以上版本____ `” 这种类型的文件是用来占位置的（或者说是填两个文件之间的夹缝的），你可以发现它们出现在每两个大文件之间。具体原理我下面会说明。 


你只要知道，这些文件对其他文件没有影响，下载完毕后可以直接删除（当然也可以不下载，但是不推荐），并不是某些人所说的广告。 

--------------------------------------- 
这里来说一下这种文件的作用和原理：（原创，转载请注明本页地址和作者） 

我们知道BT下载的时候文件都是分块的，从不同的人那里下载不同的块，最后下载完整个文件。 

块有一定的大小，每个任务中块的大小都是固定的，比如512K。 
现在问题就来了，大部分文件大小不可能是整512K的倍数，那么如何对它们进行分块？一个文件还好，最后那不足512K的放在一块里就行了，那多个文件呢？这就涉及到一个边界对齐的问题。 

假如有两个文件，第一个文件的大小是100个块多一点，第二个文件的大小是50块多一点。 
标准的BT对它们的处理是当成一个连续的大文件对待的，那么第二个文件的前面一部分数据会被补在第一个文件后面。也就是说第101个块中有一部分是第一个文件最后的数据，还有一部分是第二个文件头部的数据。下载完了之后再分开。 

这种方法比较容易出问题，经常会出现的情况是此块下载不完全或者分离错误，导致后面的文件头部出现错误。（特别是很多BT软件支持选择下载部分文件的时候，相邻的两个文件共用同一个块会出现很多问题）而要命的是，很多文件的头部是非常重要的，文件头损坏了往往导致整个文件不能读取。 


很多BT软件进行多文件下载的时候，你经常会发现，原来我下好的100%文件，它前面有一个文件我没有选择下载，但它却占用了一部分空间（或者下载百分比不是0%），当我重新选择下载前面的这个文件的时候，后面的那个已经下好了的100%文件突然变成99%之类的情况。 

更严重的情况如BitSpirit等很多BT软件下载多集电视连续剧的时候经常发生中间的某一集或某几集无法播放的情况。仔细察看发现是这些文件的头部没有正确下载（全是空的），导致媒体播放器根本不能识别这些视频文件。 

这些问题都是文件边界没有对齐造成的。 

BitComet对此的解决方法就是加入一些空文件，让每个大文件都补足块大小的整数倍。这样就可以保证每个文件的头部刚好对齐于块的大小，避免了上述情况的发生。 
这些加进来的用于补齐文件的文件就是我们看到的“`_____padding_file_0_XXXX`”之类的文件。它出现在两个文件之间，而且大小刚好可以把前一个文件凑足块大小的整数倍。 

这种文件虽然会占用一点空间，但是和整个要下载的文件相比实在是微不足道，而且它并不是某些人所说的“BitComet用于宣传的无用垃圾文件”（鄙视一下这些人），在下载多个大文件的时候可以有效减少问题的发生。 


---

在使用`uTorrent`的过程中，当勾选下载部分文件的时候，会出现前后各一个文件也被下载了，但是没有内容，其原因就是标准BT将前后文件粘连到一起了，`uTorrent`为了下载完整这个文件，会把前后的两个粘连块都下载下来，分割后就有前后两块放到了前后两个文件中，但是这两个文件无法使用，因为没有下载全。
